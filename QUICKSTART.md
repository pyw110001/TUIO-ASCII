# 快速启动指南

## 1. 安装依赖

```bash
# 安装根目录依赖
npm install

# 安装前端依赖
cd client
npm install
cd ..
```

## 2. 启动系统

### 开发模式（推荐）

```bash
npm run dev
```

这将同时启动：
- 后端服务器：`http://localhost:3001`
- 前端应用：`http://localhost:3000`

### 分别启动

**终端 1 - 后端**：
```bash
npm run server
```

**终端 2 - 前端**：
```bash
cd client
npm run dev
```

## 3. 访问 Web 界面

打开浏览器访问：`http://localhost:3000`

## 4. 配置系统

1. **配置页面**：
   - 设置 UDP 端口（默认 3333）
   - 选择 TCP 模式（客户端/服务端）
   - 配置 TCP 目标地址和端口
   - 选择发送策略（状态变化/心跳）
   - 选择区域模式（网格/自定义）

2. **区域编辑页面**（如使用自定义模式）：
   - 在画布上拖拽绘制矩形区域
   - 为每个区域指定区域号（1-255）

## 5. 测试系统

### 方法一：使用测试脚本

```bash
node test-tuio-sender.js
```

然后输入命令：
- `set 1 0.5 0.5` - 在中心位置创建一个 cursor
- `set 1 0.2 0.3` - 移动 cursor 到新位置
- `clear` - 清除所有 cursor

### 方法二：使用监控页面的测试发送功能

1. 进入**监控**页面
2. 点击**测试发送**按钮
3. 输入区域号和状态（有人/无人）
4. 查看发送的十六进制帧

### 方法三：使用实际 TUIO 设备

1. 配置 TUIO 发送端指向 `127.0.0.1:3333`（或你配置的 UDP 端口）
2. 在监控页面查看接收到的 cursor 信息

## 6. 验证协议帧

在监控页面查看"最近发送的帧"，验证格式：

- **有人帧示例**：`1C 02 64 00 00 00 FF 7F`
- **无人帧示例**：`1C 02 64 01 00 00 FF 7E`

校验和计算：
- 前 7 字节和：`0x1C + 0x02 + 0x64 + 0x00 + 0x00 + 0x00 + 0xFF = 0x181`
- `0x181 mod 0x100 = 0x81`
- `checksum = (0x100 - 0x81) mod 0x100 = 0x7F` ✓

## 常见问题

### 端口被占用

修改 `server/index.js` 中的端口号，或使用配置页面修改。

### TCP 连接失败

**客户端模式**：
- 确认目标设备正在运行
- 检查 IP 和端口是否正确
- 使用 `telnet <ip> <port>` 测试连接

**服务端模式**：
- 确认监听端口未被占用
- 检查防火墙设置

### 收不到 TUIO 消息

1. 确认 UDP 端口配置正确
2. 检查防火墙是否阻止 UDP
3. 使用 `test-tuio-sender.js` 测试
4. 使用 Wireshark 抓包验证

## 下一步

- 阅读完整 [README.md](README.md) 了解详细功能
- 查看代码了解实现细节
- 根据实际需求调整配置和区域设置

